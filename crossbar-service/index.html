<!DOCTYPE html>
<html>
<head>
    <title>SSP - Stone, Scrissors, Paper - The ultimate game</title>
</head>
<body>
<h1>SSP - Stone, Scrissors, Paper - The ultimate game</h1>
<script>AUTOBAHN_DEBUG = false;</script>
<script src="http://autobahn.s3.amazonaws.com/autobahnjs/latest/autobahn.min.jgz"></script>

<form>
    <label for="username">Username: </label><input type="text" name="username" id="username" />
    <label for="password">Password: </label><input type="password" name="password" id="password" />
    <button>Login</button>
    <button>Logout</button>
</form>

<script>
    'use strict';
    console.log("Running AutobahnJS " + autobahn.version);
    var connection = new autobahn.Connection({
        url: "ws://127.0.0.1:8080/ws",
        realm: "ssp-game"
    });
    connection.onopen = function (session, details) {
        console.log("Connected:", details);
        function on_event1(args, kwargs, details) {
            console.log('event happened', args, kwargs, details);
        }

        session.subscribe('com.myapp.test', on_event1).then(
                function (subscription) {
                    console.log('subscription succeed!', subscription)
                },
                function (error) {
                    console.log('subscription failed!', error)

                }
        ).then(session.publish('com.myapp.test', ['Hello, world!'], {}, {acknowledge: true}).then(
                function (publication) {
                    console.log('publication was successful!', publication);
                },
                function (error) {
                    console.log('publication error', error);
                }
        ));
    };
    connection.onclose = function (reason, details) {
        console.log("Connection lost: " + reason, details);
    };
    connection.open();
</script>
</body>
</html>